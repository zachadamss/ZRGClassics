---
layout: layouts/base.njk
title: Maintenance Tracker
description: "Track service history and maintenance schedules for your vintage BMW and Porsche. Vehicle-specific presets, mileage and date-based reminders, export to JSON and CSV."
keywords: "maintenance tracker, service history, car maintenance log, BMW maintenance, Porsche maintenance, vehicle service tracker"
extraScripts:
  - js/garage.js
  - tools/maintenance-tracker.js
---

<div class="maintenance-tracker">
    <div class="tracker-header">
        <h1>Maintenance Tracker</h1>
        <p>Track service history and maintenance schedules for your vintage German cars</p>
    </div>

    <!-- Garage View -->
    <div class="tracker-section garage-section">
        <div class="section-header">
            <h2>Select Vehicle</h2>
            <a href="/account/garage/" class="btn btn-secondary">Manage Garage</a>
        </div>
        <div class="garage-grid" id="garage-grid">
            <!-- Vehicle cards will be inserted here -->
            <div class="empty-garage" id="empty-garage">
                <p>No vehicles in your garage yet.</p>
                <p>Click "Add Vehicle" to get started.</p>
            </div>
        </div>
    </div>

    <!-- Vehicle Detail View -->
    <div class="tracker-section vehicle-detail-section" id="vehicle-detail" style="display: none;">
        <div class="section-header">
            <button type="button" class="btn btn-secondary" id="back-to-garage">&larr; Back</button>
            <div class="vehicle-info">
                <h2 id="detail-vehicle-name">Vehicle Name</h2>
                <span class="vehicle-platform-badge" id="detail-vehicle-platform">E30</span>
            </div>
        </div>

        <!-- Mileage Update -->
        <div class="mileage-card">
            <div class="mileage-display">
                <span class="mileage-label">Current Mileage</span>
                <span class="mileage-value" id="current-mileage-display">0</span>
                <span class="mileage-unit">miles</span>
            </div>
            <div class="mileage-update">
                <input type="number" id="update-mileage" placeholder="Enter new mileage">
                <button type="button" class="btn btn-primary" id="update-mileage-btn">Update</button>
            </div>
        </div>

        <!-- Tabs -->
        <div class="detail-tabs">
            <button type="button" class="tab-btn active" data-tab="upcoming">Upcoming Maintenance</button>
            <button type="button" class="tab-btn" data-tab="schedule">Maintenance Schedule</button>
            <button type="button" class="tab-btn" data-tab="history">Service History</button>
        </div>

        <!-- Upcoming Maintenance Tab -->
        <div class="tab-content active" id="tab-upcoming">
            <div class="upcoming-header">
                <h3>Upcoming & Overdue</h3>
            </div>
            <div class="upcoming-list" id="upcoming-list">
                <!-- Upcoming items will be inserted here -->
            </div>
        </div>

        <!-- Maintenance Schedule Tab -->
        <div class="tab-content" id="tab-schedule">
            <div class="schedule-header">
                <h3>Maintenance Schedule</h3>
                <button type="button" class="btn btn-secondary" id="add-maintenance-item">+ Add Item</button>
            </div>
            <div class="schedule-table-wrapper">
                <table class="schedule-table">
                    <thead>
                        <tr>
                            <th>Item</th>
                            <th>Interval (Miles)</th>
                            <th>Interval (Months)</th>
                            <th>Last Service</th>
                            <th>Next Due</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="schedule-tbody">
                        <!-- Schedule rows will be inserted here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Service History Tab -->
        <div class="tab-content" id="tab-history">
            <div class="history-header">
                <h3>Service History</h3>
                <button type="button" class="btn btn-secondary" id="add-service-record">+ Add Record</button>
            </div>
            <div class="history-list" id="history-list">
                <!-- History items will be inserted here -->
            </div>
        </div>
    </div>

    <!-- Add/Edit Maintenance Item Modal -->
    <div class="modal-overlay" id="maintenance-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="maintenance-modal-title">Add Maintenance Item</h3>
                <button type="button" class="modal-close" id="close-maintenance-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="maintenance-name">Item Name</label>
                    <input type="text" id="maintenance-name" placeholder="e.g., Oil Change, Timing Belt">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="maintenance-interval-miles">Interval (Miles)</label>
                        <input type="number" id="maintenance-interval-miles" min="0" placeholder="e.g., 5000">
                    </div>
                    <div class="form-group">
                        <label for="maintenance-interval-months">Interval (Months)</label>
                        <input type="number" id="maintenance-interval-months" min="0" placeholder="e.g., 12">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="maintenance-last-mileage">Last Service Mileage</label>
                        <input type="number" id="maintenance-last-mileage" min="0" placeholder="e.g., 120000">
                    </div>
                    <div class="form-group">
                        <label for="maintenance-last-date">Last Service Date</label>
                        <input type="date" id="maintenance-last-date">
                    </div>
                </div>
                <input type="hidden" id="maintenance-edit-id">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancel-maintenance">Cancel</button>
                <button type="button" class="btn btn-primary" id="save-maintenance">Save Item</button>
            </div>
        </div>
    </div>

    <!-- Add Service Record Modal -->
    <div class="modal-overlay" id="service-modal">
        <div class="modal-content modal-wide">
            <div class="modal-header">
                <h3 id="service-modal-title">Log Service</h3>
                <button type="button" class="modal-close" id="close-service-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-row">
                    <div class="form-group">
                        <label for="service-item">Service Performed</label>
                        <select id="service-item">
                            <option value="">Select or enter custom...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="service-item-custom">Custom Service Name</label>
                        <input type="text" id="service-item-custom" placeholder="e.g., Replaced water pump">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="service-date">Service Date</label>
                        <input type="date" id="service-date">
                    </div>
                    <div class="form-group">
                        <label for="service-mileage">Mileage at Service</label>
                        <input type="number" id="service-mileage" min="0" placeholder="e.g., 125000">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="service-cost">Cost ($)</label>
                        <input type="number" id="service-cost" min="0" step="0.01" placeholder="e.g., 150.00">
                    </div>
                    <div class="form-group">
                        <label for="service-shop">Shop / DIY</label>
                        <select id="service-shop">
                            <option value="diy">DIY</option>
                            <option value="shop">Professional Shop</option>
                            <option value="dealer">Dealer</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="service-parts">Parts Used</label>
                    <input type="text" id="service-parts" placeholder="e.g., Mahle filter, Liqui Moly 0W-40">
                </div>
                <div class="form-group">
                    <label for="service-notes">Notes</label>
                    <textarea id="service-notes" rows="3" placeholder="Any additional notes about this service..."></textarea>
                </div>
                <input type="hidden" id="service-edit-id">
                <input type="hidden" id="service-linked-maintenance-id">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancel-service">Cancel</button>
                <button type="button" class="btn btn-primary" id="save-service">Save Record</button>
            </div>
        </div>
    </div>

    <!-- Export Actions -->
    <div class="tracker-section export-section" id="export-section" style="display: none;">
        <h3>Export</h3>
        <div class="export-buttons">
            <button type="button" class="btn btn-secondary" id="export-json">Export JSON</button>
            <button type="button" class="btn btn-secondary" id="export-csv">Export CSV</button>
            <button type="button" class="btn btn-secondary" id="print-records">Print</button>
        </div>
    </div>
</div>
